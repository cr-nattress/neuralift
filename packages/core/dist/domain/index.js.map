{"version":3,"sources":["../../src/domain/entities/Trial.ts","../../src/domain/value-objects/PerformanceStats.ts","../../src/domain/value-objects/TrainingMode.ts","../../src/domain/entities/Session.ts","../../src/domain/entities/Level.ts","../../src/domain/entities/UserProfile.ts","../../src/domain/value-objects/NBackLevel.ts","../../src/config/constants.ts","../../src/domain/value-objects/Position.ts","../../src/domain/events/SessionCompleted.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Trial Entity\n *\n * Represents a single trial in a training session.\n * Uses immutable pattern - methods return new Trial instances.\n */\n\nimport type { PositionIndex } from '../value-objects/Position';\n\n/**\n * Raw trial data for serialization\n */\nexport interface TrialData {\n  readonly id: number;\n  readonly position: PositionIndex;\n  readonly audioLetter: string;\n  readonly isPositionMatch: boolean;\n  readonly isAudioMatch: boolean;\n  readonly userPositionResponse: boolean | null;\n  readonly userAudioResponse: boolean | null;\n  readonly positionResponseTime: number | null;\n  readonly audioResponseTime: number | null;\n  readonly stimulusTimestamp: number;\n}\n\n/**\n * Immutable Trial entity\n */\nexport class Trial {\n  private constructor(private readonly data: TrialData) {}\n\n  /**\n   * Creates a new Trial\n   */\n  static create(\n    id: number,\n    position: PositionIndex,\n    audioLetter: string,\n    isPositionMatch: boolean,\n    isAudioMatch: boolean\n  ): Trial {\n    return new Trial({\n      id,\n      position,\n      audioLetter,\n      isPositionMatch,\n      isAudioMatch,\n      userPositionResponse: null,\n      userAudioResponse: null,\n      positionResponseTime: null,\n      audioResponseTime: null,\n      stimulusTimestamp: Date.now(),\n    });\n  }\n\n  /**\n   * Creates a Trial from existing data (for deserialization)\n   */\n  static fromData(data: TrialData): Trial {\n    return new Trial(data);\n  }\n\n  // Getters\n  get id(): number {\n    return this.data.id;\n  }\n\n  get position(): PositionIndex {\n    return this.data.position;\n  }\n\n  get audioLetter(): string {\n    return this.data.audioLetter;\n  }\n\n  get isPositionMatch(): boolean {\n    return this.data.isPositionMatch;\n  }\n\n  get isAudioMatch(): boolean {\n    return this.data.isAudioMatch;\n  }\n\n  get userPositionResponse(): boolean | null {\n    return this.data.userPositionResponse;\n  }\n\n  get userAudioResponse(): boolean | null {\n    return this.data.userAudioResponse;\n  }\n\n  get positionResponseTime(): number | null {\n    return this.data.positionResponseTime;\n  }\n\n  get audioResponseTime(): number | null {\n    return this.data.audioResponseTime;\n  }\n\n  get stimulusTimestamp(): number {\n    return this.data.stimulusTimestamp;\n  }\n\n  /**\n   * Records a position response, returning a new Trial instance\n   */\n  recordPositionResponse(response: boolean): Trial {\n    const responseTime = Date.now() - this.data.stimulusTimestamp;\n    return new Trial({\n      ...this.data,\n      userPositionResponse: response,\n      positionResponseTime: responseTime,\n    });\n  }\n\n  /**\n   * Records an audio response, returning a new Trial instance\n   */\n  recordAudioResponse(response: boolean): Trial {\n    const responseTime = Date.now() - this.data.stimulusTimestamp;\n    return new Trial({\n      ...this.data,\n      userAudioResponse: response,\n      audioResponseTime: responseTime,\n    });\n  }\n\n  /**\n   * Checks if position response was correct\n   */\n  isPositionCorrect(): boolean {\n    if (this.data.userPositionResponse === null) {\n      // No response - miss if it was a match, correct rejection otherwise\n      return !this.data.isPositionMatch;\n    }\n    return this.data.userPositionResponse === this.data.isPositionMatch;\n  }\n\n  /**\n   * Checks if audio response was correct\n   */\n  isAudioCorrect(): boolean {\n    if (this.data.userAudioResponse === null) {\n      // No response - miss if it was a match, correct rejection otherwise\n      return !this.data.isAudioMatch;\n    }\n    return this.data.userAudioResponse === this.data.isAudioMatch;\n  }\n\n  /**\n   * Gets position response category for stats calculation\n   */\n  getPositionCategory(): 'hit' | 'miss' | 'falseAlarm' | 'correctRejection' {\n    const responded = this.data.userPositionResponse === true;\n    const isMatch = this.data.isPositionMatch;\n\n    if (isMatch && responded) return 'hit';\n    if (isMatch && !responded) return 'miss';\n    if (!isMatch && responded) return 'falseAlarm';\n    return 'correctRejection';\n  }\n\n  /**\n   * Gets audio response category for stats calculation\n   */\n  getAudioCategory(): 'hit' | 'miss' | 'falseAlarm' | 'correctRejection' {\n    const responded = this.data.userAudioResponse === true;\n    const isMatch = this.data.isAudioMatch;\n\n    if (isMatch && responded) return 'hit';\n    if (isMatch && !responded) return 'miss';\n    if (!isMatch && responded) return 'falseAlarm';\n    return 'correctRejection';\n  }\n\n  /**\n   * Checks if any response has been recorded\n   */\n  hasResponse(): boolean {\n    return this.data.userPositionResponse !== null || this.data.userAudioResponse !== null;\n  }\n\n  /**\n   * Serializes the trial to JSON\n   */\n  toJSON(): TrialData {\n    return { ...this.data };\n  }\n}\n","/**\n * PerformanceStats Value Object\n *\n * Represents performance metrics for a session or trial set.\n * Uses signal detection theory metrics (d-prime) for cognitive assessment.\n */\n\n/**\n * Performance statistics calculated from session trials\n */\nexport interface PerformanceStats {\n  /** Number of correct match identifications (hits) */\n  readonly hits: number;\n  /** Number of missed matches (misses) */\n  readonly misses: number;\n  /** Number of incorrect match claims (false alarms) */\n  readonly falseAlarms: number;\n  /** Number of correctly identified non-matches */\n  readonly correctRejections: number;\n  /** Hit rate: hits / (hits + misses) */\n  readonly hitRate: number;\n  /** False alarm rate: falseAlarms / (falseAlarms + correctRejections) */\n  readonly falseAlarmRate: number;\n  /** D-prime: sensitivity measure from signal detection theory */\n  readonly dPrime: number;\n  /** Overall accuracy percentage (0-100) */\n  readonly accuracy: number;\n  /** Average response time in milliseconds (null if no responses) */\n  readonly avgResponseTime: number | null;\n}\n\n/**\n * Raw counts for calculating performance stats\n */\nexport interface PerformanceRawCounts {\n  hits: number;\n  misses: number;\n  falseAlarms: number;\n  correctRejections: number;\n  responseTimes: number[];\n}\n\n/**\n * Calculates z-score for d-prime calculation\n * Uses approximation of inverse normal CDF\n */\nfunction zScore(p: number): number {\n  // Clamp to avoid infinity\n  const clampedP = Math.max(0.001, Math.min(0.999, p));\n\n  // Approximation using Abramowitz and Stegun formula\n  const a1 = -39.6968302866538;\n  const a2 = 220.946098424521;\n  const a3 = -275.928510446969;\n  const a4 = 138.357751867269;\n  const a5 = -30.6647980661472;\n  const a6 = 2.50662823884;\n\n  const b1 = -54.4760987982241;\n  const b2 = 161.585836858041;\n  const b3 = -155.698979859887;\n  const b4 = 66.8013118877197;\n  const b5 = -13.2806815528857;\n\n  const c1 = -7.78489400243029e-3;\n  const c2 = -0.322396458041136;\n  const c3 = -2.40075827716184;\n  const c4 = -2.54973253934373;\n  const c5 = 4.37466414146497;\n  const c6 = 2.93816398269878;\n\n  const d1 = 7.78469570904146e-3;\n  const d2 = 0.32246712907004;\n  const d3 = 2.445134137143;\n  const d4 = 3.75440866190742;\n\n  const pLow = 0.02425;\n  const pHigh = 1 - pLow;\n\n  let q: number;\n  let r: number;\n\n  if (clampedP < pLow) {\n    q = Math.sqrt(-2 * Math.log(clampedP));\n    return (\n      (((((c1 * q + c2) * q + c3) * q + c4) * q + c5) * q + c6) /\n      ((((d1 * q + d2) * q + d3) * q + d4) * q + 1)\n    );\n  } else if (clampedP <= pHigh) {\n    q = clampedP - 0.5;\n    r = q * q;\n    return (\n      ((((((a1 * r + a2) * r + a3) * r + a4) * r + a5) * r + a6) * q) /\n      (((((b1 * r + b2) * r + b3) * r + b4) * r + b5) * r + 1)\n    );\n  } else {\n    q = Math.sqrt(-2 * Math.log(1 - clampedP));\n    return (\n      -(((((c1 * q + c2) * q + c3) * q + c4) * q + c5) * q + c6) /\n      ((((d1 * q + d2) * q + d3) * q + d4) * q + 1)\n    );\n  }\n}\n\n/**\n * Creates PerformanceStats from raw counts\n */\nexport function createPerformanceStats(counts: PerformanceRawCounts): PerformanceStats {\n  const { hits, misses, falseAlarms, correctRejections, responseTimes } = counts;\n\n  const totalSignals = hits + misses;\n  const totalNoise = falseAlarms + correctRejections;\n  const total = totalSignals + totalNoise;\n\n  // Calculate rates with edge case handling\n  const hitRate = totalSignals > 0 ? hits / totalSignals : 0;\n  const falseAlarmRate = totalNoise > 0 ? falseAlarms / totalNoise : 0;\n\n  // Calculate d-prime\n  const dPrime = zScore(hitRate) - zScore(falseAlarmRate);\n\n  // Calculate accuracy\n  const correctResponses = hits + correctRejections;\n  const accuracy = total > 0 ? (correctResponses / total) * 100 : 0;\n\n  // Calculate average response time\n  const avgResponseTime =\n    responseTimes.length > 0\n      ? responseTimes.reduce((sum, t) => sum + t, 0) / responseTimes.length\n      : null;\n\n  return {\n    hits,\n    misses,\n    falseAlarms,\n    correctRejections,\n    hitRate,\n    falseAlarmRate,\n    dPrime,\n    accuracy,\n    avgResponseTime,\n  };\n}\n\n/**\n * Creates empty performance stats (for initial state)\n */\nexport function createEmptyPerformanceStats(): PerformanceStats {\n  return {\n    hits: 0,\n    misses: 0,\n    falseAlarms: 0,\n    correctRejections: 0,\n    hitRate: 0,\n    falseAlarmRate: 0,\n    dPrime: 0,\n    accuracy: 0,\n    avgResponseTime: null,\n  };\n}\n","/**\n * TrainingMode Value Object\n *\n * Represents the type of N-back training:\n * - single-position: Track position matches only\n * - single-audio: Track audio (letter) matches only\n * - dual: Track both position AND audio matches simultaneously\n */\n\nexport type TrainingMode = 'single-position' | 'single-audio' | 'dual';\n\n/**\n * All available training modes\n */\nexport const TRAINING_MODES: readonly TrainingMode[] = [\n  'single-position',\n  'single-audio',\n  'dual',\n] as const;\n\n/**\n * Validates if a string is a valid training mode\n */\nexport function isValidTrainingMode(value: string): value is TrainingMode {\n  return TRAINING_MODES.includes(value as TrainingMode);\n}\n\n/**\n * Returns human-readable name for a training mode\n */\nexport function getTrainingModeName(mode: TrainingMode): string {\n  switch (mode) {\n    case 'single-position':\n      return 'Position Only';\n    case 'single-audio':\n      return 'Audio Only';\n    case 'dual':\n      return 'Dual N-Back';\n  }\n}\n\n/**\n * Checks if a training mode includes position tracking\n */\nexport function modeIncludesPosition(mode: TrainingMode): boolean {\n  return mode === 'single-position' || mode === 'dual';\n}\n\n/**\n * Checks if a training mode includes audio tracking\n */\nexport function modeIncludesAudio(mode: TrainingMode): boolean {\n  return mode === 'single-audio' || mode === 'dual';\n}\n","/**\n * Session Entity\n *\n * Represents a complete training session consisting of multiple trials.\n * Mutates internally for performance during gameplay.\n */\n\nimport type { NBackLevel } from '../value-objects/NBackLevel';\nimport type { TrainingMode } from '../value-objects/TrainingMode';\nimport {\n  type PerformanceStats,\n  type PerformanceRawCounts,\n  createPerformanceStats,\n  createEmptyPerformanceStats,\n} from '../value-objects/PerformanceStats';\nimport { modeIncludesPosition, modeIncludesAudio } from '../value-objects/TrainingMode';\nimport { Trial, type TrialData } from './Trial';\n\n/**\n * Configuration for creating a session\n */\nexport interface SessionConfig {\n  readonly levelId: string;\n  readonly nBack: NBackLevel;\n  readonly mode: TrainingMode;\n  readonly trialCount: number;\n  readonly trialDuration: number;\n}\n\n/**\n * Result of a completed session\n */\nexport interface SessionResult {\n  readonly sessionId: string;\n  readonly levelId: string;\n  readonly mode: TrainingMode;\n  readonly nBack: NBackLevel;\n  readonly timestamp: Date;\n  readonly duration: number;\n  readonly trials: TrialData[];\n  readonly positionStats: PerformanceStats;\n  readonly audioStats: PerformanceStats;\n  readonly combinedAccuracy: number;\n  readonly completed: boolean;\n}\n\n/**\n * Session progress information\n */\nexport interface SessionProgress {\n  readonly current: number;\n  readonly total: number;\n  readonly percentage: number;\n}\n\n/**\n * Session entity - manages training session state\n */\nexport class Session {\n  private readonly sessionId: string;\n  private readonly config: SessionConfig;\n  private trials: Trial[];\n  private currentTrialIndex: number;\n  private startTime: number | null;\n  private endTime: number | null;\n  private isCompleted: boolean;\n\n  constructor(sessionId: string, config: SessionConfig, trials: Trial[]) {\n    this.sessionId = sessionId;\n    this.config = config;\n    this.trials = trials;\n    this.currentTrialIndex = 0;\n    this.startTime = null;\n    this.endTime = null;\n    this.isCompleted = false;\n  }\n\n  /**\n   * Starts the session\n   */\n  start(): void {\n    this.startTime = Date.now();\n  }\n\n  /**\n   * Gets the session ID\n   */\n  getId(): string {\n    return this.sessionId;\n  }\n\n  /**\n   * Gets the session configuration\n   */\n  getConfig(): SessionConfig {\n    return this.config;\n  }\n\n  /**\n   * Gets the current trial, or null if session is complete\n   */\n  getCurrentTrial(): Trial | null {\n    if (this.currentTrialIndex >= this.trials.length) {\n      return null;\n    }\n    const trial = this.trials[this.currentTrialIndex];\n    return trial ?? null;\n  }\n\n  /**\n   * Gets the current trial index\n   */\n  getCurrentTrialIndex(): number {\n    return this.currentTrialIndex;\n  }\n\n  /**\n   * Records a position response for the current trial\n   */\n  recordPositionResponse(response: boolean): void {\n    const currentTrial = this.trials[this.currentTrialIndex];\n    if (!currentTrial) return;\n    this.trials[this.currentTrialIndex] = currentTrial.recordPositionResponse(response);\n  }\n\n  /**\n   * Records an audio response for the current trial\n   */\n  recordAudioResponse(response: boolean): void {\n    const currentTrial = this.trials[this.currentTrialIndex];\n    if (!currentTrial) return;\n    this.trials[this.currentTrialIndex] = currentTrial.recordAudioResponse(response);\n  }\n\n  /**\n   * Advances to the next trial\n   * @returns true if there are more trials, false if session is complete\n   */\n  advanceToNextTrial(): boolean {\n    this.currentTrialIndex++;\n    return this.currentTrialIndex < this.trials.length;\n  }\n\n  /**\n   * Completes the session and returns results\n   */\n  complete(): SessionResult {\n    this.endTime = Date.now();\n    this.isCompleted = true;\n\n    const duration = this.startTime ? this.endTime - this.startTime : 0;\n    const positionStats = this.calculatePositionStats();\n    const audioStats = this.calculateAudioStats();\n    const combinedAccuracy = this.calculateCombinedAccuracy(positionStats, audioStats);\n\n    return {\n      sessionId: this.sessionId,\n      levelId: this.config.levelId,\n      mode: this.config.mode,\n      nBack: this.config.nBack,\n      timestamp: new Date(this.startTime ?? Date.now()),\n      duration,\n      trials: this.trials.map((t) => t.toJSON()),\n      positionStats,\n      audioStats,\n      combinedAccuracy,\n      completed: true,\n    };\n  }\n\n  /**\n   * Gets session progress\n   */\n  getProgress(): SessionProgress {\n    const current = this.currentTrialIndex + 1;\n    const total = this.trials.length;\n    const percentage = total > 0 ? (this.currentTrialIndex / total) * 100 : 0;\n\n    return { current, total, percentage };\n  }\n\n  /**\n   * Checks if the session is complete\n   */\n  isSessionComplete(): boolean {\n    return this.isCompleted || this.currentTrialIndex >= this.trials.length;\n  }\n\n  /**\n   * Gets all trials\n   */\n  getTrials(): readonly Trial[] {\n    return this.trials;\n  }\n\n  private calculatePositionStats(): PerformanceStats {\n    if (!modeIncludesPosition(this.config.mode)) {\n      return createEmptyPerformanceStats();\n    }\n\n    const counts: PerformanceRawCounts = {\n      hits: 0,\n      misses: 0,\n      falseAlarms: 0,\n      correctRejections: 0,\n      responseTimes: [],\n    };\n\n    for (const trial of this.trials) {\n      const category = trial.getPositionCategory();\n      switch (category) {\n        case 'hit':\n          counts.hits++;\n          break;\n        case 'miss':\n          counts.misses++;\n          break;\n        case 'falseAlarm':\n          counts.falseAlarms++;\n          break;\n        case 'correctRejection':\n          counts.correctRejections++;\n          break;\n      }\n\n      if (trial.positionResponseTime !== null) {\n        counts.responseTimes.push(trial.positionResponseTime);\n      }\n    }\n\n    return createPerformanceStats(counts);\n  }\n\n  private calculateAudioStats(): PerformanceStats {\n    if (!modeIncludesAudio(this.config.mode)) {\n      return createEmptyPerformanceStats();\n    }\n\n    const counts: PerformanceRawCounts = {\n      hits: 0,\n      misses: 0,\n      falseAlarms: 0,\n      correctRejections: 0,\n      responseTimes: [],\n    };\n\n    for (const trial of this.trials) {\n      const category = trial.getAudioCategory();\n      switch (category) {\n        case 'hit':\n          counts.hits++;\n          break;\n        case 'miss':\n          counts.misses++;\n          break;\n        case 'falseAlarm':\n          counts.falseAlarms++;\n          break;\n        case 'correctRejection':\n          counts.correctRejections++;\n          break;\n      }\n\n      if (trial.audioResponseTime !== null) {\n        counts.responseTimes.push(trial.audioResponseTime);\n      }\n    }\n\n    return createPerformanceStats(counts);\n  }\n\n  private calculateCombinedAccuracy(\n    positionStats: PerformanceStats,\n    audioStats: PerformanceStats\n  ): number {\n    const mode = this.config.mode;\n\n    if (mode === 'single-position') {\n      return positionStats.accuracy;\n    }\n    if (mode === 'single-audio') {\n      return audioStats.accuracy;\n    }\n\n    // Dual mode - average of both\n    return (positionStats.accuracy + audioStats.accuracy) / 2;\n  }\n\n  /**\n   * Serializes session to result format\n   */\n  toJSON(): SessionResult {\n    const positionStats = this.calculatePositionStats();\n    const audioStats = this.calculateAudioStats();\n    const combinedAccuracy = this.calculateCombinedAccuracy(positionStats, audioStats);\n    const duration = this.startTime\n      ? (this.endTime ?? Date.now()) - this.startTime\n      : 0;\n\n    return {\n      sessionId: this.sessionId,\n      levelId: this.config.levelId,\n      mode: this.config.mode,\n      nBack: this.config.nBack,\n      timestamp: new Date(this.startTime ?? Date.now()),\n      duration,\n      trials: this.trials.map((t) => t.toJSON()),\n      positionStats,\n      audioStats,\n      combinedAccuracy,\n      completed: this.isCompleted,\n    };\n  }\n}\n","/**\n * Level Entity\n *\n * Represents a training level configuration.\n * Defines N-back difficulty and mode settings.\n */\n\nimport type { NBackLevel } from '../value-objects/NBackLevel';\nimport type { TrainingMode } from '../value-objects/TrainingMode';\n\n/**\n * Criteria for unlocking a level\n */\nexport interface UnlockCriteria {\n  readonly requiredLevel: string;\n  readonly minAccuracy: number;\n}\n\n/**\n * Level configuration\n */\nexport interface Level {\n  readonly id: string;\n  readonly name: string;\n  readonly nBack: NBackLevel;\n  readonly mode: TrainingMode;\n  readonly description: string;\n  readonly unlockCriteria?: UnlockCriteria;\n}\n\n/**\n * User progress on a specific level\n */\nexport interface LevelProgress {\n  readonly levelId: string;\n  readonly bestAccuracy: number;\n  readonly totalSessions: number;\n  readonly lastPlayedAt: Date | null;\n  readonly unlocked: boolean;\n}\n\n/**\n * Creates a Level from configuration\n */\nexport function createLevel(\n  id: string,\n  name: string,\n  nBack: NBackLevel,\n  mode: TrainingMode,\n  description: string,\n  unlockCriteria?: UnlockCriteria\n): Level {\n  const level: Level = {\n    id,\n    name,\n    nBack,\n    mode,\n    description,\n  };\n\n  if (unlockCriteria !== undefined) {\n    return { ...level, unlockCriteria };\n  }\n\n  return level;\n}\n\n/**\n * Checks if a level requires unlocking\n */\nexport function levelRequiresUnlock(level: Level): boolean {\n  return level.unlockCriteria !== undefined;\n}\n\n/**\n * Checks if unlock criteria are met\n */\nexport function isLevelUnlockCriteriaMet(\n  level: Level,\n  levelProgresses: Map<string, LevelProgress>\n): boolean {\n  if (!level.unlockCriteria) {\n    return true; // No unlock criteria means always unlocked\n  }\n\n  const requiredProgress = levelProgresses.get(level.unlockCriteria.requiredLevel);\n  if (!requiredProgress) {\n    return false;\n  }\n\n  return requiredProgress.bestAccuracy >= level.unlockCriteria.minAccuracy;\n}\n","/**\n * UserProfile Entity\n *\n * Represents aggregated user behavior and preferences.\n * Used for LLM-powered personalized feedback generation.\n */\n\nimport type { NBackLevel } from '../value-objects/NBackLevel';\nimport type { TrainingMode } from '../value-objects/TrainingMode';\n\n/**\n * Training preferences derived from user behavior\n */\nexport interface TrainingPreferences {\n  readonly preferredTimeOfDay: 'morning' | 'afternoon' | 'evening' | 'night' | null;\n  readonly averageSessionDuration: number;\n  readonly preferredMode: TrainingMode | null;\n  readonly sessionsPerWeek: number;\n}\n\n/**\n * Performance trends over time\n */\nexport interface PerformanceTrends {\n  readonly overallTrend: 'improving' | 'stable' | 'declining';\n  readonly positionTrend: 'improving' | 'stable' | 'declining';\n  readonly audioTrend: 'improving' | 'stable' | 'declining';\n  readonly recentAccuracies: number[];\n}\n\n/**\n * Identified strengths and weaknesses\n */\nexport interface StrengthsWeaknesses {\n  readonly strongerModality: 'position' | 'audio' | 'balanced';\n  readonly consistentlyStrugglesAt: NBackLevel | null;\n  readonly consistentlyExcelsAt: NBackLevel | null;\n}\n\n/**\n * Behavioral patterns observed\n */\nexport interface BehavioralPatterns {\n  readonly respondsQuicklyToPosition: boolean;\n  readonly respondsQuicklyToAudio: boolean;\n  readonly tendsToPressMatchTooOften: boolean;\n  readonly tendsToPressMatchTooRarely: boolean;\n  readonly performsBetterEarlyInSession: boolean;\n  readonly performsBetterLateInSession: boolean;\n}\n\n/**\n * User profile for personalization\n */\nexport interface UserProfile {\n  readonly id: string;\n  readonly currentLevel: NBackLevel;\n  readonly totalSessions: number;\n  readonly totalTrainingTime: number;\n  readonly currentStreak: number;\n  readonly longestStreak: number;\n  readonly preferences: TrainingPreferences;\n  readonly trends: PerformanceTrends;\n  readonly strengthsWeaknesses: StrengthsWeaknesses;\n  readonly behavioralPatterns: BehavioralPatterns;\n  readonly lastUpdated: Date;\n}\n\n/**\n * Creates an initial user profile for new users\n */\nexport function createInitialUserProfile(id: string): UserProfile {\n  return {\n    id,\n    currentLevel: 1,\n    totalSessions: 0,\n    totalTrainingTime: 0,\n    currentStreak: 0,\n    longestStreak: 0,\n    preferences: {\n      preferredTimeOfDay: null,\n      averageSessionDuration: 0,\n      preferredMode: null,\n      sessionsPerWeek: 0,\n    },\n    trends: {\n      overallTrend: 'stable',\n      positionTrend: 'stable',\n      audioTrend: 'stable',\n      recentAccuracies: [],\n    },\n    strengthsWeaknesses: {\n      strongerModality: 'balanced',\n      consistentlyStrugglesAt: null,\n      consistentlyExcelsAt: null,\n    },\n    behavioralPatterns: {\n      respondsQuicklyToPosition: false,\n      respondsQuicklyToAudio: false,\n      tendsToPressMatchTooOften: false,\n      tendsToPressMatchTooRarely: false,\n      performsBetterEarlyInSession: false,\n      performsBetterLateInSession: false,\n    },\n    lastUpdated: new Date(),\n  };\n}\n\n/**\n * Generates a summary of the user profile for LLM consumption\n */\nexport function generateProfileSummary(profile: UserProfile): string {\n  const lines: string[] = [];\n\n  lines.push(`Current N-back level: ${profile.currentLevel}`);\n  lines.push(`Total sessions: ${profile.totalSessions}`);\n  lines.push(`Training streak: ${profile.currentStreak} days`);\n\n  if (profile.trends.overallTrend !== 'stable') {\n    lines.push(`Performance trend: ${profile.trends.overallTrend}`);\n  }\n\n  if (profile.strengthsWeaknesses.strongerModality !== 'balanced') {\n    lines.push(`Stronger at: ${profile.strengthsWeaknesses.strongerModality} tasks`);\n  }\n\n  if (profile.behavioralPatterns.tendsToPressMatchTooOften) {\n    lines.push('Tendency: Over-reports matches (false alarms)');\n  } else if (profile.behavioralPatterns.tendsToPressMatchTooRarely) {\n    lines.push('Tendency: Under-reports matches (misses)');\n  }\n\n  if (profile.preferences.preferredTimeOfDay) {\n    lines.push(`Prefers training: ${profile.preferences.preferredTimeOfDay}`);\n  }\n\n  return lines.join('\\n');\n}\n","/**\n * NBackLevel Value Object\n *\n * Represents the N-back difficulty level (1-back through 9-back).\n * Higher values require remembering stimuli from further back.\n */\n\nexport type NBackLevel = 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9;\n\n/**\n * Validates if a number is a valid N-back level\n */\nexport function isValidNBackLevel(value: number): value is NBackLevel {\n  return Number.isInteger(value) && value >= 1 && value <= 9;\n}\n\n/**\n * Creates an NBackLevel from a number, throwing if invalid\n */\nexport function createNBackLevel(value: number): NBackLevel {\n  if (!isValidNBackLevel(value)) {\n    throw new Error(`Invalid N-back level: ${value}. Must be between 1 and 9.`);\n  }\n  return value;\n}\n","/**\n * Application Constants\n *\n * Core configuration values used throughout the application.\n */\n\n/** Default trial duration in milliseconds */\nexport const DEFAULT_TRIAL_DURATION_MS = 3000;\n\n/** Default number of trials per session */\nexport const DEFAULT_TRIALS_PER_SESSION = 20;\n\n/** Minimum accuracy required for level progression */\nexport const MIN_ACCURACY_FOR_PROGRESSION = 80;\n\n/** Target match percentage in sequences (roughly 30-40%) */\nexport const TARGET_MATCH_PERCENTAGE = 0.35;\n\n/** Available letters for audio stimuli */\nexport const AUDIO_LETTERS = ['C', 'H', 'K', 'L', 'Q', 'R', 'S', 'T'] as const;\n\n/** Grid size (3x3) */\nexport const GRID_SIZE = 3;\n\n/** Total grid positions */\nexport const TOTAL_POSITIONS = GRID_SIZE * GRID_SIZE;\n\n/** Maximum N-back level supported */\nexport const MAX_N_BACK_LEVEL = 9;\n\n/** Minimum sessions for reliable streak calculation */\nexport const MIN_SESSIONS_FOR_STREAK = 1;\n\n/** Session timeout in milliseconds (auto-pause after inactivity) */\nexport const SESSION_TIMEOUT_MS = 30000;\n","/**\n * Position Value Object\n *\n * Represents a position in the 3x3 training grid.\n * Provides utilities for position manipulation and comparison.\n */\n\nimport { GRID_SIZE, TOTAL_POSITIONS } from '../../config/constants';\n\n/**\n * Position index type (0-8 for 3x3 grid)\n */\nexport type PositionIndex = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8;\n\n/**\n * Position with row and column coordinates\n */\nexport interface Position {\n  readonly row: number;\n  readonly col: number;\n  readonly index: PositionIndex;\n}\n\n/**\n * Validates if a number is a valid position index\n */\nexport function isValidPositionIndex(value: number): value is PositionIndex {\n  return Number.isInteger(value) && value >= 0 && value < TOTAL_POSITIONS;\n}\n\n/**\n * Creates a Position from an index (0-8)\n */\nexport function createPosition(index: number): Position {\n  if (!isValidPositionIndex(index)) {\n    throw new Error(`Invalid position index: ${index}. Must be between 0 and ${TOTAL_POSITIONS - 1}.`);\n  }\n\n  return {\n    row: Math.floor(index / GRID_SIZE),\n    col: index % GRID_SIZE,\n    index,\n  };\n}\n\n/**\n * Creates a Position from row and column coordinates\n */\nexport function createPositionFromCoords(row: number, col: number): Position {\n  if (row < 0 || row >= GRID_SIZE || col < 0 || col >= GRID_SIZE) {\n    throw new Error(`Invalid position coordinates: (${row}, ${col})`);\n  }\n\n  const index = (row * GRID_SIZE + col) as PositionIndex;\n  return { row, col, index };\n}\n\n/**\n * Checks if two positions are equal\n */\nexport function positionsEqual(a: Position, b: Position): boolean {\n  return a.index === b.index;\n}\n\n/**\n * Gets all valid position indices\n */\nexport function getAllPositionIndices(): readonly PositionIndex[] {\n  return [0, 1, 2, 3, 4, 5, 6, 7, 8] as const;\n}\n\n/**\n * Gets a random position index\n */\nexport function getRandomPositionIndex(): PositionIndex {\n  return Math.floor(Math.random() * TOTAL_POSITIONS) as PositionIndex;\n}\n","/**\n * SessionCompleted Event\n *\n * Emitted when a training session is completed.\n */\n\nimport type { DomainEvent } from './DomainEvent';\n\nexport interface SessionCompleted extends DomainEvent {\n  readonly type: 'SESSION_COMPLETED';\n  readonly levelId: string;\n  readonly accuracy: number;\n  readonly duration: number;\n}\n\n/**\n * Creates a SessionCompleted event\n */\nexport function createSessionCompletedEvent(\n  aggregateId: string,\n  levelId: string,\n  accuracy: number,\n  duration: number\n): SessionCompleted {\n  return {\n    type: 'SESSION_COMPLETED',\n    timestamp: new Date(),\n    aggregateId,\n    levelId,\n    accuracy,\n    duration,\n  };\n}\n"]}